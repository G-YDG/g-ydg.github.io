<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>CODING 持续集成 | YddBlog</title><meta name="description" content="持续集成持续集成（Continuous integration），指的是**频繁地将代码集成到主干**。 持续集成主要目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。 JenkinsJenkins 是一款开源 CI&amp;CD 软件，用于自动化各种任务，包括构建、测试和部署软件。Jenkins 支持各种"><meta property="og:type" content="article"><meta property="og:title" content="CODING 持续集成"><meta property="og:url" content="https://g-ydg.github.io/2022/03/04/CODING%20%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/index.html"><meta property="og:site_name" content="ydd"><meta property="og:description" content="持续集成持续集成（Continuous integration），指的是**频繁地将代码集成到主干**。 持续集成主要目的，就是让产品可以快速迭代，同时还能保持高质量。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。 JenkinsJenkins 是一款开源 CI&amp;CD 软件，用于自动化各种任务，包括构建、测试和部署软件。Jenkins 支持各种"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FrglABXZqkl_8-uOsSouL8dAvnco.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FgC0t9Mes9nbTP0bj2CXbpDd2kH-.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FlIondFutf6-f1ZGuT5gk40jL9zT.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fj9Y4CfIfW72qw_OCxq7fQxvMB_e.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fj9E1KJqj8YqszsUoHCI5FhyW_eZ.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FqEX4OFyel9gBFaPCwlQ5B8MAjcl.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FgzRO0S0-ZkOo7rGEep4eKIeFgzJ.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FuXcNK-NfHRazNojMF9JpPUfoIvO.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FpZ7SJm87M-SKAWNei_7soaaLRB1.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FpOxZZVsgpPwGQcVAKwDTmVHIreR.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fs9jzEUSbVJAIjrTbm0PVPWZpK-N.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FllRMQieXjg9Y0tMOfgrqUgOmpxD.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fqs0xjXYLv1aGTAUqZb59qYMu7UA.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FsWQ7D8jDhR-rODlU3cQLmbYUDKf.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FtCX4B7brKC33jRSOnHWdx73LOZk.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FjoXeSeWSVuxWlaXknst6B4UIQJc.png"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Focmk0uCWqRulKAHGHU-yfjhiQnE.png"><meta property="article:published_time" content="2022-03-04T00:16:44.000Z"><meta property="article:modified_time" content="2026-02-22T02:06:06.559Z"><meta property="article:author" content="Ydd"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FrglABXZqkl_8-uOsSouL8dAvnco.png"><link rel="canonical" href="https://g-ydg.github.io/2022/03/04/CODING%20%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/index.html"><link rel="alternate" href="/atom.xml" title="ydd" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.2"></head><body class="main-center theme-purple" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="搜索"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">首页</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">归档</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">项目</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/g-ydg" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">公告</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">归档</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/11/">十一月 2024</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/09/">九月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/05/">五月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/04/">四月 2023</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/03/">三月 2023</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/02/">二月 2022</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/01/">一月 2022</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">十二月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">十一月 2021</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">十月 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">九月 2021</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">八月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">七月 2021</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">六月 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">五月 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">四月 2021</a><span class="archive-list-count">5</span></li></ul></div></div><div class="widget"><h3 class="widget-title">最新文章</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2024/11/06/Docker%E6%97%A5%E5%BF%97%E6%B8%85%E7%90%86/" class="title">Docker日志清理</a></p><p class="item-date"><time datetime="2024-11-06T19:54:22.000Z" itemprop="datePublished">2024-11-07</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2023/09/03/Wechaty+ChatGPT%20%E5%AE%9E%E7%8E%B0%E4%B8%AA%E4%BA%BA%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA/" class="title">Wechaty+ChatGPT 实现个人聊天机器人</a></p><p class="item-date"><time datetime="2023-09-03T22:32:07.000Z" itemprop="datePublished">2023-09-04</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2023/05/17/%E9%98%BF%E9%87%8C%E4%BA%91CLI/" class="title">阿里云CLI</a></p><p class="item-date"><time datetime="2023-05-17T22:49:05.000Z" itemprop="datePublished">2023-05-18</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2023/04/03/Kubernetes%20Tutorials%20%EF%BD%9C%20k8s%20%E6%95%99%E7%A8%8B/" class="title">Kubernetes Tutorials ｜ k8s 教程</a></p><p class="item-date"><time datetime="2023-04-03T18:13:01.000Z" itemprop="datePublished">2023-04-04</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/2023/04/02/COS%20+%20Github%20Actions%20%E5%AE%9E%E7%8E%B0%E8%AF%AD%E9%9B%80%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83/" class="title">COS + Github Actions 实现语雀自动发布</a></p><p class="item-date"><time datetime="2023-04-02T23:17:38.000Z" itemprop="datePublished">2023-04-03</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-CODING 持续集成" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">CODING 持续集成</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2022/03/04/CODING%20%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" class="article-date"><time datetime="2022-03-04T00:16:44.000Z" itemprop="datePublished">2022-03-04</time> </a></span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2022/03/04/CODING%20%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/#comments" class="article-comment-link">评论</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">字数统计: 2.5k(字)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">阅读时长: 10(分)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h1 id="持续集成"><a href="#持续集成" class="headerlink" title="持续集成"></a>持续集成</h1><p><font style="color:#404040">持续集成（Continuous integration），</font>指的是**<font style="color:#404040">频繁地将代码集成到主干</font>**<font style="color:#404040">。</font></p><p>持续集成主要目的，就是<strong>让产品可以快速迭代，同时还能保持高质量</strong>。它的核心措施是，代码集成到主干之前，必须通过自动化测试。只要有一个测试用例失败，就不能集成。</p><h1 id="Jenkins"><a href="#Jenkins" class="headerlink" title="Jenkins"></a><font style="color:#4f4f4f">Jenkins</font></h1><p><font style="color:#4d4d4d">Jenkins 是一款开源 CI&amp;CD 软件，用于自动化各种任务，包括构建、测试和部署软件。Jenkins 支持各种运行方式，可通过系统包、Docker 或者通过一个独立的 Java 程序。</font></p><h2 id="流水线"><a href="#流水线" class="headerlink" title="流水线"></a><font style="color:#292b2c">流水线</font></h2><p><font style="color:#121212">流水线，指的是按顺序连接在一起的事件或作业组，</font><font style="color:#222">可以通过脚本，把项目的构建、测试、部署等阶段组合起来执行</font><font style="color:#646464">。</font></p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FrglABXZqkl_8-uOsSouL8dAvnco.png"></p><h2 id="Jenkins-Pipeline"><a href="#Jenkins-Pipeline" class="headerlink" title="Jenkins Pipeline"></a><font style="color:#292b2c">Jenkins </font><font style="color:#4d4d4d">Pipeline</font></h2><p><font style="color:#222">Jenkins Pipeline（或简称为 “Pipeline”）是一套插件，将持续交付的实现和实施集成到 Jenkins 中。它提供了一套可扩展的工具，用于将“简单到复杂”的交付流程实现为“</font><strong><font style="color:#222">持续交付即代码</font></strong><font style="color:#222">”。而 Jenkins Pipeline 的定义通常被写入到一个文本文件（称为 Jenkinsfile ）中，该文件可以被放入项目的源代码控制库中。</font></p><h2 id="Jenkinsfile"><a href="#Jenkinsfile" class="headerlink" title="Jenkinsfile "></a><font style="color:#4d4d4d">Jenkinsfile</font></h2><p><font style="color:#222">JenkinsFile 可以通过两种语法来声明流水线结构，一种是</font><strong><font style="color:#222">声明式语法</font></strong><font style="color:#222">，另一种是</font><strong><font style="color:#222">脚本式语法</font></strong><font style="color:#222">。</font></p><h3 id="声明式流水线"><a href="#声明式流水线" class="headerlink" title="声明式流水线"></a><a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/pipeline/syntax/#%E5%A3%B0%E6%98%8E%E5%BC%8F%E6%B5%81%E6%B0%B4%E7%BA%BF">声明式流水线</a></h3><p><font style="color:#4d4d4d">声明式流水线是由一个包含了一些指令和部分的外套代码块组成的。每个部分又可以包含其他的部分、指令和步骤，在某些情况下也会包含条件。</font></p><h4 id="Pipeline"><a href="#Pipeline" class="headerlink" title="Pipeline"></a><font style="color:#363636">Pipeline</font></h4><p><font style="color:#222">流水线(Pipeline)表示一个构建任务的总过程，包含所有阶段，如构建、测试、部署等。所有的 stage/阶段和 step/步骤都在这个块中定义。它是声明性流水线语法的关键块。</font></p><p><font style="color:#222">语法格式如下：</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="Agent"><a href="#Agent" class="headerlink" title="Agent"></a><font style="color:#000">Agent</font></h4><p>指定自定义工作空间。通常定义在<font style="color:#363636">pipeline 的顶部位置或者在每个 stage 中。</font></p><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a><font style="color:#292b2c">参数</font></h5><ul><li>any：可以运行在任意节点上。</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent any</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><font style="color:#000">none ：不指定全局代理节点，如有必要，需要为单个阶段指定代理节点。</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent none</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><font style="color:#000">label：在指定标签的节点上运行。</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;label <span class="string">&#x27;my-defined-label&#x27;</span>&#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>docker：<font style="color:#292b2c">使用指定的容器执行流水线或阶段</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">      docker &#123;</span><br><span class="line">        image <span class="string">&#x27;hyperf/hyperf:7.4-alpine-v3.11-swoole&#x27;</span></span><br><span class="line">        reuseNode <span class="string">&#x27;true&#x27;</span></span><br><span class="line">        registryCredentialsId <span class="string">&#x27;7ca3f680-1791-4f91-a9bc-d106fa661480&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>dockerfile：<font style="color:#292b2c">执行流水线或阶段, 使用从源代码库包含的 </font>Dockerfile<font style="color:#292b2c"> 构建的容器</font></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    agent &#123;</span><br><span class="line">      dockerfile &#123;</span><br><span class="line">          filename <span class="string">&#x27;Dockerfile&#x27;</span></span><br><span class="line">          dir <span class="string">&#x27;docker&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Stage"><a href="#Stage" class="headerlink" title="Stage"></a><font style="color:#363636">Stage</font></h4><p><font style="color:#222">流水线中可以包含多个 stage/阶段，一个 stage/阶段执行一个特定任务，例如测试、部署等，每个 stage/阶段可以包含多个步骤。</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        stage (<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        stage (<span class="string">&#x27;Test&#x27;</span>) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        stage (<span class="string">&#x27;Deploy&#x27;</span>) &#123;</span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Step"><a href="#Step" class="headerlink" title="Step"></a><font style="color:#363636">Step</font></h4><p><font style="color:#222">一个 Step/步骤是指某个阶段中的单个任务。可以在一个阶段块中定义一系列步骤，这些步骤依次执行。</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">      stage(<span class="string">&#x27;Parallel Stage&#x27;</span>) &#123;</span><br><span class="line">        parallel &#123;</span><br><span class="line">          stage(<span class="string">&#x27;Stage A&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          stage(<span class="string">&#x27;Stage B&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                ...</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Parallel"><a href="#Parallel" class="headerlink" title="Parallel"></a><font style="color:#000;background-color:#f9fafc">Parallel</font></h4><p>并行执行流水线的多个阶段。 注意，一个阶段必须只有一个 steps 或 parallel 的阶段。 嵌套阶段本身不能包含进一步的 parallel 阶段, 但是其他的阶段的行为与任何其他 stage 相同。任何包含 parallel 的阶段不能包含 agent 或 tools 阶段, 因为他们没有相关 steps。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        stage (<span class="string">&#x27;Build&#x27;</span>) &#123;</span><br><span class="line">            steps &#123;</span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&#x27;Running build phase...&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a><font style="color:#292b2c">Environment</font></h4><p><font style="color:#000">定义环境变量，在整个流水线/阶段范围内可见。</font>该指令支持一个特殊的助手方法 credentials()，该方法可用于在 Jenkins 环境中通过标识符访问预定义的凭证。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    environment &#123;</span><br><span class="line">        USER_NAME = <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    stages &#123;</span><br><span class="line">        stage(<span class="string">&#x27;Example&#x27;</span>) &#123;</span><br><span class="line">            environment &#123;</span><br><span class="line">                ACCESS_KEY = credentials(<span class="string">&#x27;凭证ID或标识字符串&#x27;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">                sh <span class="string">&#x27;printenv&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Script"><a href="#Script" class="headerlink" title="Script"></a><font style="color:#292b2c">Script</font></h4><p>处理非声明式的代码，如赋值语句 def name=’fq’。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  ...</span><br><span class="line"></span><br><span class="line">  stage(<span class="string">&#x27;Example&#x27;</span>) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        script &#123;</span><br><span class="line">          def config = [:]</span><br><span class="line">          config.name = <span class="string">&quot;config-name&quot;</span></span><br><span class="line">          <span class="built_in">echo</span> <span class="string">&quot;The Config is <span class="variable">$&#123;config.name&#125;</span>&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><h3 id="脚本式流水线"><a href="#脚本式流水线" class="headerlink" title="脚本式流水线"></a><a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/pipeline/syntax/#%E8%84%9A%E6%9C%AC%E5%8C%96%E6%B5%81%E6%B0%B4%E7%BA%BF">脚本式流水线</a></h3><p><font style="color:#222">与声明式一样的是，都是建立在底层流水线的子系统上的。不同的是，脚本化流水线实际上是由 </font><a target="_blank" rel="noopener" href="http://groovy-lang.org/syntax.html"><font style="color:#222">Groovy</font></a><font style="color:#222"> 构建的通用 </font><a href="about:blank"><font style="color:#222">DSL</font></a><font style="color:#222">。 Groovy 语言提供的大部分功能都可以用于脚本化流水线的用户。这意味着它是一个非常有表现力和灵活的工具，可以通过它编写持续交付流水线。</font></p><h4 id="Node"><a href="#Node" class="headerlink" title="Node"></a><font style="color:#363636">Node</font></h4><p><font style="color:#222">节点是执行整个工作流的机器。它是脚本化管道语法的关键部分。</font></p><p><font style="color:#222">语法格式如下：</font></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// Jenkinsfile (Scripted Pipeline)</span><br><span class="line">node &#123;</span><br><span class="line">  stage(<span class="string">&#x27;Example&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (env.BRANCH_NAME == <span class="string">&#x27;master&#x27;</span>) &#123;</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&#x27;I only execute on the master branch&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&#x27;I execute elsewhere&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="两者区别比较"><a href="#两者区别比较" class="headerlink" title="两者区别比较"></a>两者区别比较</h3><ul><li><font style="color:#292b2c">脚本化流水线为 Jenkins 用户提供了</font><strong><font style="color:#292b2c">大量的灵活性和可扩展性</font></strong><font style="color:#292b2c">。但 Groovy 学习曲线通常不适合给定团队的所有成员，因此创造了声明式流水线来为编写 Jenkins 流水线提供一种更简单、更有主见的语法。</font></li><li><font style="color:#292b2c">两者本质上是相同的流水线子系统。都是 “</font><strong><font style="color:#222">持续交付即代码</font></strong><font style="color:#292b2c">“ 的持久实现。它们都能够使用构建到流水线中或插件提供的步骤。</font></li><li><font style="color:#292b2c">主要区别在于</font><strong><font style="color:#292b2c">语法和灵活性</font></strong><font style="color:#292b2c">。</font><ul><li><font style="color:#292b2c">声明式限制了用户使用更严格和预定义的结构， 使其成为更简单的持续交付流水线的理想选择。</font></li><li><font style="color:#292b2c">脚本化提供了很少的限制, 以至于对脚本和语法的唯一限制往往是由 Groovy 子集本身定义的，而不是任何特定于流水线的系统，这使他成为权利用户和那些有更复杂需求的人的理想选择。</font></li></ul></li></ul><h3 id="流水线步骤（Pipeline-Step）"><a href="#流水线步骤（Pipeline-Step）" class="headerlink" title="流水线步骤（Pipeline Step）"></a>流水线步骤（<font style="color:#363636">Pipeline Step</font>）</h3><ul><li><a target="_blank" rel="noopener" href="https://www.jenkins.io/doc/pipeline/steps/workflow-basic-steps/">Basic Steps</a>：为流水线提供常用步骤指令。常用指令有 echo、writeFile 等。</li><li><a target="_blank" rel="noopener" href="https://www.jenkins.io/doc/pipeline/steps/workflow-durable-task-step/">Nodes and Processes</a>：为流水线提供节点以及进程管理的步骤指令。常用指令有 bat、powershell、sh 等。</li><li><a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/pipeline/steps/ssh-steps/">SSH Pipeline Steps</a>：为流水线提供 SSH 工具管理指令，用于命令执行或文件传输。<ul><li>sshCommand：在远端机器执行指定命令</li><li>sshGet：从远端机器获取文件/目录到当前工作空间</li><li>sshPut：将当前工作空间的文件/目录放置到远端机器</li><li>sshRemove：将远端机器的某个文件/目录移除</li><li>sshScript：读取本地 shell 脚本，在远端机器执行</li></ul></li><li><a target="_blank" rel="noopener" href="https://www.jenkins.io/doc/pipeline/steps/workflow-scm-step/">SCM Step</a>：为流水线提供检查源代码指令。<ul><li>checkout：从版本控制工具中检出代码。</li></ul></li></ul><h1 id="CODING-中的持续集成"><a href="#CODING-中的持续集成" class="headerlink" title="CODING 中的持续集成"></a><a target="_blank" rel="noopener" href="https://help.coding.net/docs/ci/intro.html">CODING 中的持续集成</a></h1><p><font style="color:#202d40">官方介绍，当提交了一部分修改完成的代码后，我们总是希望可以快速得到直观且有效的反馈，及早暴露问题。在开发过程中总有一部分工作是相对机械化，易出错的（例如打包、部署）。CODING 持续集成便是专门为此工作流而设计的得力功能。通过对每次提交的代码进行自动化的代码检查、单元测试、编译构建、甚至自动部署与发布，能够大大降低开发人员的工作负担，减少许多不必要的重复劳动，持续提升代码质量与开发效率。</font></p><h2 id="凭据管理"><a href="#凭据管理" class="headerlink" title="凭据管理"></a>凭据管理</h2><p>打开在项目管理下方的项目设置。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FgC0t9Mes9nbTP0bj2CXbpDd2kH-.png"></p><p>选择开发者选项下的凭据管理，可自行进行管理。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FlIondFutf6-f1ZGuT5gk40jL9zT.png"></p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fj9Y4CfIfW72qw_OCxq7fQxvMB_e.png"></p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fj9E1KJqj8YqszsUoHCI5FhyW_eZ.png"></p><h2 id="快速上手"><a href="#快速上手" class="headerlink" title="快速上手"></a>快速上手</h2><p>创建代码仓库</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FqEX4OFyel9gBFaPCwlQ5B8MAjcl.png"></p><p>选择导入外部仓库，仓库地址：<a target="_blank" rel="noopener" href="https://github.com/G-YDG/hyperf-demo.git">https://github.com/G-YDG/hyperf-demo.git</a>。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FgzRO0S0-ZkOo7rGEep4eKIeFgzJ.png"></p><p>点击完成创建，等待项目导入。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FuXcNK-NfHRazNojMF9JpPUfoIvO.png"></p><p>导入完成后，进行创建构建计划。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FpZ7SJm87M-SKAWNei_7soaaLRB1.png"></p><p>选择自定义构建过程</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FpOxZZVsgpPwGQcVAKwDTmVHIreR.png"></p><p>填写构建计划名称以及选择代码仓库。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fs9jzEUSbVJAIjrTbm0PVPWZpK-N.png"></p><p>创建之后，选择流程配置。可以看到有两种编辑器，<a target="_blank" rel="noopener" href="https://help.coding.net/docs/ci/process/visual-editor.html">图形化编辑器</a>以及<a target="_blank" rel="noopener" href="https://help.coding.net/docs/ci/process/text.html">文本编辑器</a>。选择文本编辑器，并将以下代码粘贴进去。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">pipeline &#123;</span><br><span class="line">  agent any</span><br><span class="line">  stages &#123;</span><br><span class="line">    stage(<span class="string">&#x27;检出&#x27;</span>) &#123;</span><br><span class="line">      steps &#123;</span><br><span class="line">        checkout([</span><br><span class="line">          <span class="variable">$class</span>: <span class="string">&#x27;GitSCM&#x27;</span>,</span><br><span class="line">          branches: [[name: GIT_BUILD_REF]],</span><br><span class="line">          userRemoteConfigs: [[</span><br><span class="line">            url: GIT_REPO_URL,</span><br><span class="line">            credentialsId: CREDENTIALS_ID</span><br><span class="line">          ]]])</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      stage(<span class="string">&#x27;代码检查&#x27;</span>) &#123;</span><br><span class="line">        parallel &#123;</span><br><span class="line">          stage(<span class="string">&#x27;自动化测试&#x27;</span>) &#123;</span><br><span class="line">            agent &#123;</span><br><span class="line">              docker &#123;</span><br><span class="line">                image <span class="string">&#x27;hyperf/hyperf:7.4-alpine-v3.11-swoole&#x27;</span></span><br><span class="line">                reuseNode <span class="string">&#x27;true&#x27;</span></span><br><span class="line">                registryCredentialsId <span class="string">&#x27;7ca3f680-1791-4f91-a9bc-d106fa661480&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">              <span class="built_in">echo</span> <span class="string">&#x27;自动化测试中...&#x27;</span></span><br><span class="line">              sh <span class="string">&#x27;composer install &amp;&amp; composer test&#x27;</span></span><br><span class="line">              <span class="built_in">echo</span> <span class="string">&#x27;自动化测试结束...&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          stage(<span class="string">&#x27;代码风格检查&#x27;</span>) &#123;</span><br><span class="line">            agent &#123;</span><br><span class="line">              docker &#123;</span><br><span class="line">                image <span class="string">&#x27;hyperf/hyperf:7.4-alpine-v3.11-swoole&#x27;</span></span><br><span class="line">                reuseNode <span class="string">&#x27;true&#x27;</span></span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            steps &#123;</span><br><span class="line">              <span class="built_in">echo</span> <span class="string">&#x27;代码风格检查中...&#x27;</span></span><br><span class="line">              sh <span class="string">&#x27;composer install &amp;&amp; composer cs-fix&#x27;</span></span><br><span class="line">              <span class="built_in">echo</span> <span class="string">&#x27;代码风格检查结束...&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      stage(<span class="string">&#x27;远程部署&#x27;</span>) &#123;</span><br><span class="line">        steps &#123;</span><br><span class="line">          <span class="built_in">echo</span> <span class="string">&#x27;远程部署开始...&#x27;</span></span><br><span class="line">          script &#123;</span><br><span class="line">            def remoteConfig = [:]</span><br><span class="line">            remoteConfig.name = <span class="string">&quot;remote-server&quot;</span></span><br><span class="line">            remoteConfig.host = <span class="string">&quot;<span class="variable">$&#123;REMOTE_HOST&#125;</span>&quot;</span></span><br><span class="line">            remoteConfig.port = <span class="string">&quot;<span class="variable">$&#123;REMOTE_SSH_PORT&#125;</span>&quot;</span>.toInteger()</span><br><span class="line">            remoteConfig.allowAnyHosts = <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">            node &#123;</span><br><span class="line">              // 使用当前项目下的凭据管理中的 SSH 私钥 凭据</span><br><span class="line">              withCredentials([sshUserPrivateKey(</span><br><span class="line">                credentialsId: <span class="string">&quot;<span class="variable">$&#123;REMOTE_CRED&#125;</span>&quot;</span>,</span><br><span class="line">                keyFileVariable: <span class="string">&quot;privateKeyFilePath&quot;</span></span><br><span class="line">              )]) &#123;</span><br><span class="line"></span><br><span class="line">                // SSH 登陆用户名</span><br><span class="line">                remoteConfig.user = <span class="string">&quot;<span class="variable">$&#123;REMOTE_USER_NAME&#125;</span>&quot;</span></span><br><span class="line">                // SSH 私钥文件地址</span><br><span class="line">                remoteConfig.identityFile = privateKeyFilePath</span><br><span class="line"></span><br><span class="line">                // 更新代码</span><br><span class="line">                sshCommand(</span><br><span class="line">                  remote: remoteConfig,</span><br><span class="line">                  <span class="built_in">command</span>: <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">                  cd <span class="variable">$&#123;DATA_PATH&#125;</span></span></span><br><span class="line"><span class="string">                  git pull</span></span><br><span class="line"><span class="string">                  &quot;</span><span class="string">&quot;&quot;</span>,</span><br><span class="line">                  sudo: <span class="literal">false</span>,</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line">                // 启动服务</span><br><span class="line">                sshCommand(</span><br><span class="line">                  remote: remoteConfig,</span><br><span class="line">                  <span class="built_in">command</span>: <span class="string">&quot;&quot;</span><span class="string">&quot;</span></span><br><span class="line"><span class="string">                  cd /data/hyperf-demo</span></span><br><span class="line"><span class="string">                  docker-compose up --build --always-recreate-deps -d</span></span><br><span class="line"><span class="string">                  &quot;</span><span class="string">&quot;&quot;</span>,</span><br><span class="line">                  sudo: <span class="literal">false</span>,</span><br><span class="line">                )</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="built_in">echo</span> <span class="string">&#x27;远程部署结束...&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FllRMQieXjg9Y0tMOfgrqUgOmpxD.png"></p><p>配置流程环境变量。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">REMOTE_HOST:远程服务器地址</span><br><span class="line">REMOTE_USER_NAME:远程连接用户名</span><br><span class="line">REMOTE_CRED:Coding 凭据</span><br><span class="line">DATA_PATH:项目工作路径</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Fqs0xjXYLv1aGTAUqZb59qYMu7UA.png"></p><p>配置触发规则，保存修改。<img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FsWQ7D8jDhR-rODlU3cQLmbYUDKf.png"></p><p>配置完成后，点击保存修改并立即构建。</p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FtCX4B7brKC33jRSOnHWdx73LOZk.png"></p><p><img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/FjoXeSeWSVuxWlaXknst6B4UIQJc.png"></p><p>查看构建过程记录。<img src="https://cdn.jsdelivr.net/gh/g-ydg/images/blog/Focmk0uCWqRulKAHGHU-yfjhiQnE.png"></p><h1 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h1><ul><li><a target="_blank" rel="noopener" href="https://www.yuque.com/u1246740/ik1grg/thq7ow">自动化：持续集成、交付、部署</a></li><li><a target="_blank" rel="noopener" href="https://www.jenkins.io/zh/doc/book/pipeline/syntax/">Jenkins 流水线语法</a></li><li><a href="about:blank">Jenkins 流水线步骤</a></li><li><a target="_blank" rel="noopener" href="https://coding.net/">CODING 官网</a></li><li><a target="_blank" rel="noopener" href="https://help.coding.net/docs/ci/intro.html">CODING-持续集成</a></li><li><a target="_blank" rel="noopener" href="https://help.coding.net/docs/ci/process/detail.html">CODING-流程配置详情</a></li></ul><h1><a href="#" class="headerlink" title="["></a>[</h1><p>](<a target="_blank" rel="noopener" href="https://help.coding.net/docs/test-management/start.html">https://help.coding.net/docs/test-management/start.html</a>)</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="https://g-ydg.github.io/2022/03/04/CODING%20%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/" title="CODING 持续集成" target="_blank" rel="external">https://g-ydg.github.io/2022/03/04/CODING 持续集成/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote></div></article><section id="comments"></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2022/03/09/CODING-%E6%8C%81%E7%BB%AD%E9%83%A8%E7%BD%B2/" title="CODING-持续部署"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;上一篇</span></a></li><li class="next"><a href="/2022/03/02/%E9%98%BF%E9%87%8C%E4%BA%91CentOS-yum%E6%BA%90%E9%97%AE%E9%A2%98/" title="阿里云CentOS-yum源问题"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>感谢您的支持，我会继续努力的!</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/images/donate/alipayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/images/donate/wechatpayimg.png" alt="扫码支持" title="扫一扫"></div><p class="text-muted mv">扫码打赏，你说多少就多少</p><p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/g-ydg" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2026 Ydd<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"文章",PAGES:"页面",CATEGORIES:"分类",TAGS:"标签",UNTITLED:"(未命名)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></body></html>